<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0, maximum-scale=1.0">
<title>我的信息</title>
<link type="text/css" rel="stylesheet" href="shopCss/style131017.css" />
<link type="text/css" rel="stylesheet" href="shopCss/main1.css" />
<link rel="stylesheet" href="shopCss/index.css" type="text/css" />
<link rel="stylesheet" href="shopCss/korea.css" type="text/css"/>
<script type="text/javascript" src="js/jquery-1.4.2.js"></script>
<link rel="stylesheet" href="newcss/css.css" type="text/css" />
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"> </script>
<script type="text/javascript" src="js/json2.js"></script>
<script type="text/javascript" src='../js/My97DatePicker/WdatePicker.js'></script>

<style type="text/css">
ul, li,nav{
	list-style: none;
	margin: 0;
	padding: 0;
}

.top_bar {
	position: fixed;
	z-index: 900;
	bottom: 0;
	left: 0;
	right: 0;
	margin: 0;
	padding: 0;
	font-family: Helvetica, Tahoma, Arial, Microsoft YaHei, sans-serif;
}

.top_menu {
	display: -webkit-box;
	border-top: 1px solid #b3b3b3;
	display: block;
	width: 100%;
	background: rgba(255, 255, 255, 0.7);
	height: 48px;
	display: -webkit-box;
	display: box;
	margin: 0;
	padding: 0;
	-webkit-box-orient: horizontal;
	background: -webkit-gradient(linear, 0 0, 0 100%, from(#e7e4e7),
		to(#b9b9b9));
}

.top_bar .top_menu>li {
	-webkit-box-flex: 1;
	background: -webkit-gradient(linear, 0 0, 0 100%, from(rgba(0, 0, 0, 0.1)),
		color-stop(50%, rgba(0, 0, 0, 0.2)), to(rgba(0, 0, 0, 0.2))),
		-webkit-gradient(linear, 0 0, 0 100%, from(rgba(255, 255, 255, 0.1)),
		color-stop(50%, rgba(255, 255, 255, 0.3)), to(rgba(255, 255, 255, 0.1)));
	-webkit-background-size: 1px 100%, 1px 100%;
	background-size: 1px 100%, 1px 100%;
	background-position: 1px center, 2px center;
	background-repeat: no-repeat;
	position: relative;
	text-align: center;
}

.top_menu>li:first-child {
	background: none;
}

.top_bar .top_menu>li>a {
	height: 48px;
	line-height: 48px;
	display: block;
	text-align: center;
	color: #4f4d4f;
	text-shadow: 0 1px rgba(255, 255, 255, 0.3);
	text-decoration: none;
	border-top: 1px solid #f9f9f9;
	-webkit-box-flex: 1;
}

.top_bar .top_menu>li>a label {
	overflow: hidden;
	margin: 0 0 0 0;
	font-size: 12px;
	display: block !important;
	line-height: 18px;
	text-align: center;
}

.top_bar .top_menu>li>a img {
	margin: 2px 0 0 0;
	height: 24px;
	width: 24px;
	color: #fff;
	line-height: 48px;
	vertical-align: middle;
}

.top_bar li:first-child a {
	display: block;
}

.menu_font {
	padding: 0;
	position: absolute;
	z-index: 500;
	bottom: 60px;
	right: 10px;
	width: 120px;
	background: #e4e3e2;
	border: 1px solid #afaeaf;
	border-radius: 5px;
	box-shadow: 0 1px 5px rgba(0, 0, 0, 0.2);
}

.menu_font.hidden {
	display: none;
}

.top_menu li:last-of-type a {
	background: none;
}

.top_menu>li:last-of-type>a label {
	padding: 0 0 0 3px;
}

.menu_font li:last-of-type {
	background: none;
}

.menu_font li a {
	text-align: left !important;
}

.top_menu li:last-of-type a {
	background: none;
}

.menu_font:before, .menu_font:after {
	content: "";
	display: inline-block;
	position: absolute;
	z-index: 240;
	bottom: 0;
	left: 85%;
	margin-left: -8px;
	margin-bottom: -16px;
	width: 0;
	height: 0;
	border: 8px solid red;
	border-color: #afaeaf transparent transparent transparent;
}

.menu_font:after {
	z-index: 501;
	border-color: #e4e3e2 transparent transparent transparent;
	margin-bottom: -15px;
	margin-left: -8px;
}

.menu_font li {
	background: -webkit-gradient(linear, 0 0, 100% 0, from(#e4e3e2),
		to(#e4e3e2), color-stop(50%, #f3f3f2)),
		-webkit-gradient(linear, 0 0, 100% 0, from(#e4e3e2), to(#e4e3e2),
		color-stop(50%, #c6c5c5));
	background-size: 100% 1px, 100% 2px;
	background-repeat: no-repeat;
	background-position: center bottom;
}

.menu_font li:first-of-type {
	border-top: 0;
}

.menu_font li:last-of-type {
	border-bottom: 0;
}

.menu_font li a {
	height: 40px;
	line-height: 40px !important;
	position: relative;
	color: #fff;
	display: block;
	width: 100%;
	text-indent: 10px;
	white-space: nowrap;
	text-overflow: ellipsis;
	overflow: hidden;
	text-decoration: none;
	color: #4f4d4f;
	text-shadow: 0 1px rgba(255, 255, 255, 0.3);
}

.menu_font li a img {
	width: 20px;
	height: 20px;
	display: inline-block;
	margin-top: -2px;
	color: #fff;
	line-height: 40px;
	vertical-align: middle;
}

.menu_font>li>a label {
	padding: 3px 0 0 3px;
	font-size: 14px;
	overflow: hidden;
	margin: 0;
}

#menu_list0 {
	right: 0;
	left: 10px;
}

#menu_list0:before, #menu_list0:after {
	left: 15%;
}

#menu_list0:after {
	margin-bottom: -15px;
	margin-left: -8px;
}

#sharemcover {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: rgba(0, 0, 0, 0.7);
	display: none;
	z-index: 20000;
}

#sharemcover img {
	position: fixed;
	right: 18px;
	top: 5px;
	width: 260px;
	height: 180px;
	z-index: 20001;
	border: 0;
}

.top_bar .top_menu>li>a:hover, .top_bar .top_menu>li>a:active {
	background-color: #CCCCCC;
}

.menu_font li a:hover, .menu_font li a:active {
	background-color: #CCCCCC;
}

.menu_font li:first-of-type a {
	border-radius: 5px 5px 0 0;
}

.menu_font li:last-of-type a {
	border-radius: 0 0 5px 5px;
}

#plug-wrap {
	position: fixed;
	top: 0;
	left: 0;
	width: 100%;
	height: 100%;
	background: rgba(0, 0, 0, 0);
	z-index: 800;
}

#cate18 .device {
	bottom: 49px;
}

#cate18 #indicator {
	bottom: 240px;
}

#cate19 .device {
	bottom: 49px;
}

#cate19 #indicator {
	bottom: 330px;
}

#cate19 .pagination {
	bottom: 60px;
}
</style>
<script type="text/javascript">
$(document).ready(function(){ 

	$.ajax({
		url : 'getUser.do',
		data : '',
		async :false,
		datatype : 'json',
		success : function(data) {
			var obj = data.object;
			$("#img").attr("src", obj.headimgurl);
			$("#strong").html(obj.wechatName);
            $("#city").html(obj.city);
            $("#wechatName").val(obj.wechatName);
            $("#wechatId").val(obj.wechatId);
  
            $.ajax({
        		url : 'customerList.do',
        		type: 'post',
        		data : 'wechatId='+obj.wechatId,
        		datatype : 'json',
        		success : function(result) {
        			var data = result.object;
        			if(data != null){
        		//	alert(obj.wechatId);
        		//alert(data.customerId);
        				 $("#customerName").val(data.customerName);
        				 if(data.sex!=null && data.sex=="男"){
        					 $("#sex").attr("checked",true);
        				 }else{
        					 $("#sex1").attr("checked",true);
        				 }
        				$("#birthday").val(data.birthday);
        				$("#email").val(data.email);
        				$("#customerId").val(data.customerId);
        				
            		}
        		}
        	}); 
		}
	
	});


	
/*	$.ajax({
		url : 'myinfo/load.do',
		type: 'post',
		data : 'openid=',document.getElementById("openid").value
		datatype : 'json',
		success : function(result) {
			var obj = result.object;
			$("#username").html(obj.username);
			$("#sex").html(obj.sex);
			$("#address").html(obj.address);
			$("#email").html(obj.email);
			$("#area").html(obj.area);
			$("#company").html(obj.company);
			$("#postion").html(obj.postion);
		},
		error : function(XMLHttpRequest, textStatus, errorThrown) {
			alert(XMLHttpRequest.status);
			alert(XMLHttpRequest.readyState);
			alert(textStatus);
		}
	});*/

});



function getCondition() {
	var birthday = $("#birthday").val();
	var email = $("#email").val();
	var customerId = $("#customerId").val();
	var customerName = $("#customerName").val();
	 var sex = $("input[name='sex']:checked").val();
	 var tel = $("#tel").val();
	// alert(sex);
	var ajaxData = {
			birthday : birthday,
			sex : sex,
			email : email,
			customerId:customerId,
			customerName:customerName,
			tel:tel
	};
	return ajaxData;
}



function save(){
	
	var tel = $("#tel").val();
	$.ajax({
		url:"../customerTable/checkPhone.do",//要请求的servlet
		data:{mobilephone:tel
		},//给服务器的参数
		type:"POST",
		dataType:"json",
		async:false,
		cache:false,
		success:function(data) {
			var obj = data.result;
			if(!obj){
				alert("手机号码已有人用！请重新填手机号码");
				//$("#mobilephone").val("");
				return;
			}
		}
	});
	
	var ajaxData = getCondition();
	//var obj2 = $("#save_form").serializeArray();
	$.ajax({
		url : '../customerTable/saveinfo.do',
		type: 'post',
		data :  ajaxData,
		datatype : 'json',
		success : function(result) {
			var obj = result.status;
				alert(obj);
			
		},
		error : function(XMLHttpRequest, textStatus, errorThrown) {
			alert("修改失败!");
		}
	});
}

function address(){
	window.location="addres.html";
}



</script>
<style>
	body{
		max-width:640px;
		margin:0 auto;
		overflow-x: hidden;
	}
	.main ul{
		width:98%;
		margin:0 auto;
	}
	.main ul li{
		overflow:hidden;
	}
	.main ul .marg{
		margin-bottom:20px;
	}
	.main ul li input[type="text"],.main ul li input[type="number"]{
		width:100%;
		border:1px solid #ccc;
		padding:10px 0;
		margin-top:10px;
		padding-left:5px;
		overflow: hidden;
	}
	.main ul li input[type="radio"]{
		width:38px;
		height:16px;
		float:none;
		vertical-align: middle;
		
	}
	.main ul .ip{
		padding:10px 20px;
	}
	.main ul li a{
		margin-top:10px;
		display:block;
		width:49%;
		padding:10px 0;
		background:#008d7c;
		border-radius:5px;
		text-align:center;
		color:#fff;
	}
</style>
</head>
<body>
 <header id="header" style="background-position: left -16.5px;">
		<a class="image avatar" href="#">
        <img id="img" src="image/overlay.png" >
    	</a>
    	<h3><strong id="strong"></strong> <font id="city"></font></h3>
</header>
<div class="clear"></div>
	<div class="main">
		<ul>
			<li><input type="text" id="customerName" name="customerName" style="" placeholder="请输入姓名"></li>
			<li><input type="text" id="wechatName" name="wechatName" readonly="readonly" placeholder="请输入微信名"></li>
			<li class="ip">
        		<label><input name="sex" id="sex" type="radio"  value="1"/>男</label> 
                <label><input name="sex" id="sex1"  type="radio"  value="2"/>女 </label>
             </li>
			<li><input type="text"   onClick="WdatePicker()" id="birthday" name="birthday" placeholder="请输入生日"></li>
			<li><input type="number"   id="tel" name="tel" placeholder="请输入电话号码"></li>
			<li><input type="text" id="email" name="email"  placeholder="请输入邮箱账号"></li>
			<li class="marg">
				<a href="#" onclick="save();" style="float:left;">修改</a>	
				<a href="#" onclick="address();"style="float:right;">地址管理</a>
			</li>
		</ul>
		<input type="hidden" id="customerId" name="customerId">
	</div>
		<!-- 
		<div class="center_c dd" >
				姓名：<input type="text" id="customerName" name="customerName" style="">
            </div>
        			
        		<div class="center_c dd" >
					微信名：<input type="text" id="wechatName" name="wechatName" readonly="readonly">
            </div>
        			
        	<div class="center_c dd">
					性别：
        			<label><input name="sex" id="sex" type="radio"  value="1"  style="float:none;vertical-align:middle;width:15px;"/>男</label> 
                     <label><input name="sex" id="sex1"  type="radio"  value="2" style="float:none;vertical-align:middle; width:15px;"/>女 </label> 
            </div>
        				
		
		
			<div class="center_c dd" >
				生日：<input type="text"   onClick="WdatePicker()" id="birthday" name="birthday">
            </div>
        			
        			
        <div class="center_c dd" >
          邮箱：<input type="text" id="email" name="email">                   
  </div>
  <div class="center_c dd" style="background:#efefef;width:70%; margin:20px auto;" >	

	<a href="#" class="pay" onclick="save();" style="float:left;">修改</a>	
		<a href="#"  class="pay" onclick="address();"style="float:right;">地址管理</a>
</div>

     </div>
		<input type="hidden" id="customerId" name="customerId">	 -->
</body>

</html>